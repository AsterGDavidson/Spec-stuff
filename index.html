<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Flowchart</title>
    <style>
        .flowchart-svg {
            display: block;
            margin: auto;
            max-width: 100%; /* Ensures SVG is not bigger than the screen */
            height: auto; /* Maintains aspect ratio */
        }
        .node {
            fill: #f0f0f0;
            stroke: #000;
            cursor: pointer;
        }
        .node-text {
            font-family: 'Arial', sans-serif;
            text-anchor: middle;
            dominant-baseline: middle;
            pointer-events: none;
            font-size: 4px; /* This is a small font size, adjust as needed */
        }
        .link {
            fill: none;
            stroke: #000;
            stroke-width: 2;
        }
    </style>
</head>
<body>

<svg class="flowchart-svg" id="flowchartSvg" viewBox="0 0 180 100">
    <!-- Links will be added by JavaScript to ensure proper connection -->
    
    <!-- Nodes -->
    <circle class="node" id="centerNode" cx="90" cy="20" r="10"/>
    <circle class="node" id="node1" cx="50" cy="70" r="10"/>
    <circle class="node" id="node2" cx="90" cy="70" r="10"/>
    <circle class="node" id="node3" cx="130" cy="70" r="10"/>

    <!-- Text -->
    <text class="node-text" x="90" y="20">Center</text>
    <text class="node-text" x="50" y="70">Node 1</text>
    <text class="node-text" x="90" y="70">Node 2</text>
    <text class="node-text" x="130" y="70">Node 3</text>
</svg>

<script>
    function adjustNodeSizes() {
        const svg = document.getElementById('flowchartSvg');
        svg.querySelectorAll('.node-text').forEach(text => {
            // Get the bounding box of the text
            const bbox = text.getBBox();
            // Calculate the radius needed, add some padding
            const radius = Math.max(bbox.width, bbox.height) / 2 + 2;
            // Find the associated circle by ID
            const circleId = text.textContent.trim().replace(/\s+/g, '').toLowerCase();
            const circle = svg.querySelector(`#${circleId}`);
            if (circle) {
                // Set the new radius
                circle.setAttribute('r', radius);
            }
        });
    }

    function drawLinks() {
        const svg = document.getElementById('flowchartSvg');
        const centerNode = svg.querySelector('#centerNode');
        const nodes = svg.querySelectorAll('.node:not(#centerNode)');

        nodes.forEach(node => {
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            const startX = parseFloat(centerNode.getAttribute('cx'));
            const startY = parseFloat(centerNode.getAttribute('cy'));
            const endX = parseFloat(node.getAttribute('cx'));
            const endY = parseFloat(node.getAttribute('cy'));
            const controlX1 = (startX + endX) / 2;
            const controlY1 = startY + (endY - startY) / 2;
            const controlX2 = controlX1;
            const controlY2 = controlY1;

            // Create a Bezier curve path
            path.setAttribute('d', `M ${startX} ${startY} C ${controlX1} ${controlY1}, ${controlX2} ${controlY2}, ${endX} ${endY}`);
            path.setAttribute('class', 'link');
            svg.insertBefore(path, centerNode); // Insert behind the center node
        });
    }

    // Initial adjustment of node sizes and drawing links
    adjustNodeSizes();
    drawLinks();
</script>

</body>
</html>
